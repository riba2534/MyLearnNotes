# 消息队列的功能和用途

- 解耦
  - 上游关注通知，不关注处理
  - 下游只关注处理，约定好消息格式
- 流量控制
  - 应对突发流量，削峰填谷
    - 大量请求先放入消息队列，然后服务端按照自己最大能力去处理
- 广播
  - 一条消息，可以被多个下游处理
- 异步
  - 收到消息之后，不需要马上进行，提高效率
    - 秒杀系统
      - 用户秒杀只需要通过风险控制以及库存锁定这两个操作就可以了
      - 后续生成订单，短信通知，可以用消息队列异步处理
- 冗余
  - 消息可以被持久化，容易回溯
- 选择消息队列的基本标准
  - 消息的可靠传递，确保不丢消息
  - Cluster 支持集群，确保不会因为某个节点而导致集群不可用
  - 性能，性能要满足场景的需要


![](https://i.loli.net/2019/12/13/t2bIoTnLuQHXiN6.png)